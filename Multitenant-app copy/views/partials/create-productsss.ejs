<style>
    :root{
        --bg:#f6f7fb;
        --card:#ffffff;
        --accent:#2563eb;
        --muted:#6b7280;
        --success:#10b981;
        --danger:#ef4444;
        --radius:12px;
        --glass: rgba(37,99,235,0.06);
    }
    .product-card{
        max-width:980px;
        margin:28px auto;
        background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.98));
        border-radius:var(--radius);
        box-shadow: 0 6px 28px rgba(17,24,39,0.06);
        padding:22px;
        font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        color:#0f172a;
    }

    .product-header{
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap:12px;
        margin-bottom:14px;
    }
    .product-title{
        font-size:1.12rem;
        font-weight:600;
        letter-spacing:-0.01em;
    }
    .product-sub{
        font-size:0.9rem;
        color:var(--muted);
    }

    .product-form{
        display:grid;
        grid-template-columns: 1fr 360px;
        gap:18px;
        align-items:start;
    }

    /* Left column inputs */
    .fields{
        display:flex;
        flex-direction:column;
        gap:12px;
    }
    label.field{
        display:flex;
        flex-direction:column;
        gap:8px;
        font-size:0.92rem;
    }
    .field .control{
        display:flex;
        gap:8px;
        align-items:center;
    }
    input[type="text"],
    input[type="number"],
    select,
    textarea {
        width:100%;
        padding:10px 12px;
        border-radius:8px;
        border:1px solid #e6e9ef;
        background: #fff;
        font-size:0.95rem;
        outline:none;
        transition:box-shadow .14s, border-color .14s;
    }
    textarea{ min-height:120px; resize:vertical; }
    input:focus, textarea:focus, select:focus {
        box-shadow: 0 6px 20px var(--glass);
        border-color: rgba(37,99,235,0.35);
    }
    .row{
        display:grid;
        grid-template-columns: 1fr 1fr;
        gap:12px;
    }

    /* Right column: image upload / preview */
    .image-panel{
        border-radius:10px;
        padding:14px;
        background: linear-gradient(180deg, rgba(15,23,42,0.02), rgba(15,23,42,0.01));
        border:1px solid #f1f5f9;
    }
    .upload-area{
        border:2px dashed #e6eefb;
        border-radius:10px;
        padding:12px;
        display:flex;
        flex-direction:column;
        gap:10px;
        align-items:center;
        justify-content:center;
        text-align:center;
        min-height:180px;
        transition:background .12s, border-color .12s;
        background:linear-gradient(180deg, rgba(37,99,235,0.02), transparent);
    }
    .upload-area.dragover{
        background: rgba(37,99,235,0.06);
        border-color: rgba(37,99,235,0.6);
        box-shadow: 0 8px 36px rgba(37,99,235,0.06);
    }
    .upload-area p{
        margin:0;
        color:var(--muted);
        font-size:0.95rem;
    }
    .btn{
        display:inline-flex;
        align-items:center;
        gap:8px;
        padding:8px 12px;
        border-radius:8px;
        border: none;
        cursor:pointer;
        font-weight:600;
        font-size:0.95rem;
    }
    .btn-primary{
        background:linear-gradient(90deg,var(--accent), #1e40af);
        color:white;
        box-shadow: 0 8px 20px rgba(37,99,235,0.12);
    }
    .btn-ghost{
        background:transparent;
        color:var(--accent);
        border:1px solid rgba(37,99,235,0.08);
    }

    .preview{
        width:100%;
        border-radius:8px;
        overflow:hidden;
        background:#fff;
        border:1px solid #eef2ff;
        display:flex;
        align-items:center;
        justify-content:center;
        min-height:140px;
    }
    .preview img{
        width:100%;
        height:auto;
        display:block;
        object-fit:cover;
    }

    .meta{
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap:8px;
        margin-top:8px;
    }
    .meta .small{ font-size:0.84rem; color:var(--muted); }

    .form-actions{
        margin-top:14px;
        display:flex;
        justify-content:flex-end;
        gap:10px;
    }

    /* helper text and errors */
    .help{ font-size:0.85rem; color:var(--muted); }
    .error{ color:var(--danger); font-size:0.85rem; }

    /* Responsive */
    @media (max-width:880px){
        .product-form{ grid-template-columns:1fr; }
        .image-panel{ order:-1; }
        .row{ grid-template-columns: 1fr; }
        .product-card{ padding:16px; margin:18px; }
    }
</style>

<form class="product-card" action="/multitenant/add-products" method="POST" enctype="multipart/form-data" novalidate>
    <div class="product-header">
        <div>
            <div class="product-title">Create... Product</div>
            <div class="product-sub">Add product details and upload an image</div>
        </div>
        <div class="product-actions">
            <button type="reset" class="btn btn-ghost" title="Reset form">Reset</button>
            <button type="submit" class="btn btn-primary">Save product</button>
        </div>
    </div>

    <div class="product-form">
        <div class="fields">
            <label class="field">
                <span>Product name</span>
                <input name="name" type="text" placeholder="e.g. Organic Dark Roast Coffee" required />
                <small class="help">Keep it short and descriptive.</small>
            </label>

            <label class="field">
                <span>Description</span>
                <textarea name="description" placeholder="Describe the product..."></textarea>
            </label>

            <div class="row">
                <label class="field">
                    <span>Price (USD)</span>
                    <input name="price" type="number" min="0" step="0.01" placeholder="0.00" required />
                </label>

                <label class="field">
                    <span>Quantity</span>
                    <input name="quantity" type="number" min="0" step="1" placeholder="0" />
                </label>
            </div>

            <div class="row">
                <label class="field">
                    <span>Category</span>
                    <select name="category">
                        <option value="">Select category</option>
                        <option>Food & Beverage</option>
                        <option>Home</option>
                        <option>Electronics</option>
                        <option>Fashion</option>
                    </select>
                </label>

                <label class="field">
                    <span>SKU (optional)</span>
                    <input name="sku" type="text" placeholder="SKU-1234" />
                </label>
            </div>

            <div style="display:flex;justify-content:flex-end;">
                <small class="help">You can add more fields later.</small>
            </div>
        </div>

        <aside class="image-panel">
            <div id="uploadArea" class="upload-area" aria-label="Image upload area">
                <div class="preview" id="previewBox">
                    <p class="help" id="previewText">Drop an image here or click to choose</p>
                </div>

                <input id="fileInput" name="image" type="file" accept="image/*" style="display:none" />

                <div class="meta">
                    <div class="small">PNG, JPG up to 5MB</div>
                    <div>
                        <button type="button" id="chooseBtn" class="btn btn-ghost">Choose file</button>
                        <button type="button" id="removeBtn" class="btn" style="display:none">Remove</button>
                    </div>
                </div>

                <div id="imgError" class="error" style="display:none"></div>
            </div>

            <div class="form-actions" style="margin-top:12px">
                <button type="button" id="clearBtn" class="btn btn-ghost">Clear image</button>
                <button type="submit" class="btn btn-primary">Save product</button>
            </div>
        </aside>
    </div>
</form>

<script>
    (function(){
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const chooseBtn = document.getElementById('chooseBtn');
        const removeBtn = document.getElementById('removeBtn');
        const clearBtn = document.getElementById('clearBtn');
        const previewBox = document.getElementById('previewBox');
        const previewText = document.getElementById('previewText');
        const imgError = document.getElementById('imgError');
        const MAX_SIZE = 5 * 1024 * 1024; // 5MB

        function showError(msg){
            imgError.textContent = msg;
            imgError.style.display = 'block';
        }
        function clearError(){
            imgError.textContent = '';
            imgError.style.display = 'none';
        }

        function renderPreview(file){
            clearError();
            const reader = new FileReader();
            reader.onload = function(e){
                previewBox.innerHTML = '';
                const img = document.createElement('img');
                img.src = e.target.result;
                img.alt = file.name || 'Preview';
                previewBox.appendChild(img);
                removeBtn.style.display = 'inline-flex';
                previewText && (previewText.style.display = 'none');
            };
            reader.readAsDataURL(file);
        }

        function resetPreview(){
            previewBox.innerHTML = '<p class="help" id="previewText">Drop an image here or click to choose</p>';
            removeBtn.style.display = 'none';
            clearError();
            fileInput.value = '';
        }

        chooseBtn.addEventListener('click', ()=> fileInput.click());
        removeBtn.addEventListener('click', resetPreview);
        clearBtn.addEventListener('click', resetPreview);

        fileInput.addEventListener('change', (e)=>{
            const file = e.target.files[0];
            if(!file) return resetPreview();
            if(!file.type.startsWith('image/')) return showError('Only image files are allowed.');
            if(file.size > MAX_SIZE) return showError('Image too large. Max 5MB.');
            renderPreview(file);
        });

        // Drag & drop
        ['dragenter','dragover'].forEach(evt=>{
            uploadArea.addEventListener(evt, (e)=>{
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.add('dragover');
            });
        });
        ['dragleave','drop'].forEach(evt=>{
            uploadArea.addEventListener(evt, (e)=>{
                e.preventDefault();
                e.stopPropagation();
                uploadArea.classList.remove('dragover');
            });
        });
        uploadArea.addEventListener('drop', (e)=>{
            const dt = e.dataTransfer;
            if(!dt || !dt.files || !dt.files.length) return;
            const file = dt.files[0];
            if(!file.type.startsWith('image/')) return showError('Only image files are allowed.');
            if(file.size > MAX_SIZE) return showError('Image too large. Max 5MB.');
            fileInput.files = dt.files; // attach to input so server receives
            renderPreview(file);
        });

        // allow clicking upload area to open picker
        uploadArea.addEventListener('click', ()=> fileInput.click());

        // basic form submit validation for required fields
        document.querySelector('.product-card').addEventListener('submit', (e)=>{
            const name = e.target.querySelector('input[name="name"]');
            const price = e.target.querySelector('input[name="price"]');
            if(!name.value.trim()){
                e.preventDefault();
                name.focus();
                alert('Please provide a product name.');
                return;
            }
            if(!price.value || Number(price.value) < 0){
                e.preventDefault();
                price.focus();
                alert('Please provide a valid price.');
                return;
            }
        });
    })();
</script>